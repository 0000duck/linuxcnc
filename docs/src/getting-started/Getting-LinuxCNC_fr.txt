:lang: fr

= Se procurer LinuxCNC[[cha:se_procurer_linuxcnc]]

Cette section décrit la voie recommandée pour télécharger et faire une
nouvelle installation de LinuxCNC.  Il existe également des méthodes
d'installation <<sec:install_alt,alternatives>> pour les aventuriers. Si
l'installation est déjà existante, mais doit juste être mise à niveau, aller
à la section <<sec:maj_linuxcnc,Mise à jour>> de LinuxCNC.

Les nouvelles installations de LinuxCNC sont facilement réalisées en
utilisant l'image ISO du DVD live.  Il s'agit d'une image ISO hybride dont
le système de fichiers peut être écrit sur une clé USB ou gravé sur un DVD
et utilisé pour démarrer le PC.  Au moment du boot, un choix est fourni
permettant de démarrer le système en "Live" (ce qui permet de lancer et
d'évaluer LinuxCNC sans modifier quoi que ce soit sur l'ordinateur) ou de
démarrer l'installateur pour installer LinuxCNC et son système
d'exploitation sur le disque dur de l'ordinateur.

Le processus dans ses grandes lignes ressemble à cela:

* Télécharger l'image ISO.
* Écrire cette image sur une clé USB ou la graver sur un DVD.
* Démarrer sur le support choisi pour tester simplement LinuxCNC.
* Démarrer sur le support choisi pour installer LinuxCNC.


== Télécharger une image

Cette section décrit les différentes méthodes de téléchargement de l'image
ISO du DVD live.


=== Téléchargement standard[[sec:telechargement_standard,standard]]

Télécharger l'image ISO disponible ici:

http://www.linuxcnc.org/linuxcnc-2.7-wheezy.iso


=== Télécharger l'image à l'aide de zsync

zsync est une application de téléchargement très efficace, elle permet la
reprise en cas de transfert interrompu elle est également efficace dans les
transferts de gros fichiers avec de petites modifications (à condition
d'avoir localement l'ancienne copie).  Utiliser zsync si la méthode de
téléchargement <<sec:telechargement_standard,standard>> pose problème.

zsync sous Linux::
    Installer zsync avec le gestionnaire de paquets Synaptic ou,
    en lançant la commande `sudo apt-get install zsync` dans une console.
    Puis, pour télécharger l'image ISO, toujours dans une console, lancer:
    `zsync http://www.linuxcnc.org/linuxcnc-2.7-wheezy.iso.zsync`

zsync sous Windows::
    Zsync a été porté sous Windows.  Il fonctionne en ligne de commande
    dans la console, comme sous Linux.  Il peut être téléchargé depuis:
	https://www.assembla.com/spaces/zsync-windows/documents


=== Vérifier l'intégrité de l'image ISO

Avant de graver un CD, il est fortement recommandé de vérifier la somme de
contrôle 'md5sum' ou 'sha256sum' de l'image ISO pour s'assurer de son
intégrité. Ouvrir une console dans le répertoire de téléchargement, puis
lancer: 'd5sum linuxcnc-2.7-wheezy.iso` ou `sha256sum
linuxcnc-2.7-wheezy.iso` et comparer le résultat avec ces sommes de
contrôle:

-----
md5sum: 3aa031895ac74a81d0639b09cd812c22
sha256sum: c47d8c8432b710f0c28f6b98389af6ad4c429d024501335e95a2646a894f45e9
-----

Vérifier la somme md5 sous Windows ou Mac:: + Windows et Mac OS X ne
disposent pas, d'origine, de programme de contrôle de la somme md5, mais il
existe des alternatives.  D'autres informations sont ici: +
https://help.ubuntu.com/community/HowToMD5SUM


== Écrire l'image sur un support bootable

L'image ISO du live DVD de LinuxCNC est une image ISO hybride, elle peut
être directement écrite sur un support de stockage USB bootable, tel qu'une
clé, une carte flash ou un disque dur, ou, gravée sur un DVD. Le support
choisi est ensuite utilisé pour booter l'ordinateur.  L'image actuelle est
trop grande pour tenir sur un CD.

Écrire l'image sur une support de stockage USB sous Linux::
    * Connecter un support de stockage USB (par exemple un flash disque ou une clé).
    * Déterminer le port USB correspondant au support.
     Cette information est disponible dans `dmesg` après la connection au port.
     `/proc/partitions` peut aussi être utile.
    * Utiliser la commande `dd` pour écrire l'image sur le support de stockage USB.
      Par exemple, Si le support de stockage est sur `/dev/sde`, alors utiliser
      cette commande:
      +
-----
dd if=linuxcnc-2.7-wheezy.iso of=/dev/sde
-----

Graver l'image sur un DVD sous Linux::

 . Insérer un DVD vierge dans lr graveur. Une fenêtre surgissante
   'CD/DVD Creator' ou 'Choisissez le type de disque' va s'ouvrir, la fermer, 
   elle ne sera pas utilisée.
 . Naviguer jusqu'au répertoire contenant l'image ISO.
 . Faire un clic droit sur le fichier de l'image ISO et choisir
   'Graver le Disque'.
 . Sélectionner la vitesse de gravure. Il est recommandé de graver à la vitesse
   la plus lente possible pour éviter toute erreur de gravure.
 . Lancer la gravure.
 . Si le choix d'un nom de fichier est demandé pour l'image disque, cliquer juste 'OK'.

Graver l'image sur un DVD sous Windows::

 . Si Windows n'intègre pas un logiciel de gravure d'image il est possible de
   télécharger Infra Recorder, un logiciel de gravure d'images gratuit et open
   source sur http://infrarecorder.org/
 . Insérer un DVD vierge dans le graveur, sélectionner 'Quitter' ou 
   'Abandonner' si un auto-run démarre.
 . Cliquer droit sur le fichier ISO et sélectionne le menu 'Graver l'image disque' 
   ou lancer 'Infra Recorder' et choisir le menu 'Actions', puis 'Graver l'image'.


== Tester LinuxCNC

Avec le support de stockage USB connecté ou le DVD Live de LinuxCNC dans le
graveur de CD/DVD, redémarrer l'ordinateur de sorte qu'il démarre sur le
support choisi. Quand l'ordinateur a redémarré, choisir soit, d'évaluer
LinuxCNC sans installer quoi que ce soit, ou de l'installer avec son système
d'exploitation.  Il n'est pas possible de créer de configuration
personnalisée ni de modifier les réglages du système comme la résolution de
l'écran sans installer LinuxCNC.

Pour évaluer LinuxCNC, aller dans le menu Applications/CNC et choisir
'LinuxCNC'. Puis sélectionnez une configuration en sim (simulation) et
essayez la.

Pour savoir si votre ordinateur est utilisable par le générateur logiciel
d'impulsions de pas, lancer un test de latence comme indiqué
<<cha:test-de-latence, dans ce chapitre>>.


== Installer LinuxCNC

Pour installer LinuxCNC depuis le Live DVD, sélectionner 'Installation
graphique' dans le menu du boot.


== Mise à jour de LinuxCNC[[sec:maj_linuxcnc,Mise à jour]]

Avec l'installation standard, le gestionnaire de mise à jour avertira des
mises à jour de LinuxCNC disponibles en ligne et permettra de mettre à jour
facilement sans connaissance particulière de Linux.  Il est possible de
faire toutes les mises à jour proposées, excepté celles du système
d'exploitation.

WARNING: [red]#Ne jamais mettre à jour vers une nouvelle distribution, même
si elle est proposée.#


== Problèmes d'installation

Dans de rares cas, le BIOS devra être réinitialisé à ses réglages par défaut
si lors de l'installation du Live CD, le disque dur n'est plus reconnu
pendant le démarrage.

== Méthodes d'installation alternatives[[sec:install_alt,alternatives]]

La manière préférable d'installer LinuxCNC, c'est d'utiliser l'image
Live/Install comme décrit précédemment.  Cette méthode est aussi simple et
fiable que nous ayons pu faire. Elle est accessible aux novices comme aux
utilisateurs expérimentés.

En plus, pour les utilisateurs expérimentés, familier de l'administration
des systèmes Debian (trouver les images d'installation, manipuler les
sources apt, changer les options du kernel etc), de nouvelles installations
sont prises en charge sur les plate-formes suivantes:

[options="header"]
|===========================================================================
| Distribution   | Architecture | kernel     | Utilisation typique
| Debian Wheezy  | i386         | RTAI       | contrôle machine & simulation
| Debian Wheezy  | amd64 & i386 | Preempt-RT | contrôle machine & simulation
| Debian Wheezy  | amd64 & i386 | vanilla    | simulation seule
| Ubuntu Precise | i386         | RTAI       | contrôle machine & simulation
| Ubuntu Precise | amd64 & i386 | vanilla    | simulation seule
| Ubuntu Lucid   | i386         | RTAI       | contrôle machine & simulation
| Ubuntu Lucid   | amd64 & i386 | vanilla    | simulation seule
|============================================================================

Les kernels RTAI sont disponibles au téléchargement depuis les archives
linuxcnc.org de Debian.  Les sources apt sont:

    * Debian Wheezy: `deb http://linuxcnc.org wheezy base`
    * Ubuntu Precise: `deb http://linuxcnc.org precise base`
    * Ubuntu Lucid: `deb http://linuxcnc.org lucid base`

Les kernels Preempt-RT sont disponibles dans les archives courantes de
debian.org, comme parties de Debian Wheezy.  Aucune source apt spéciale
n'est nécessaire.  Les paquets sont nommés `linux-image-rt-amd64` et
`linux-image-rt-686-pae`.


=== Installation sous Debian Wheezy (avec kernel Preempt-RT)

* Installer Debian Wheezy (Debian version 7), soit i386, soit amd64.
  L'installateur est téléchargeable ici:
  https://www.debian.org/CD/http-ftp/#stable

* Faire un `sudo apt-get update` suivi d'un `sudo apt-get dist-upgrade` pour
  mettre la machine à jour avec les derniers paquets de Debian Wheezy.

* Installer le kernel Preempt-RT et ses modules par un: `sudo apt-get
  install linux-image-rt-amd64` ou: `sudo apt-get install
  linux-image-rt-686-pae`.

* Rebooter, et vérifier que la machine boot bien sur le kernel Preempt-RT.
  Au login, vérifier que `uname -r` donne bien 3.2.0-4-rt-686-pae.

* Ajouter la clé de signature des archives LinuxCNC dans le apt keyring en
  faisant: `sudo apt-key adv --keyserver hkp://keys.gnupg.net --recv-key
  8f374fef`

* Ajouter une source apt telle que: `deb http://linuxcnc.org/ wheezy base
  2.7-uspace`

* Lancer `sudo apt-get update` encore une fois pour rafraîchir la liste
  depuis linuxcnc.org.

* Lancer `sudo apt-get install linuxcnc-uspace`.

* La machine est prête!


=== Installation sous Ubuntu Precise

* Installer Ubuntu Precise 12.04 x86 (32-bit). N'importe quel environnement
  doit FONCTIONNER (Ubuntu standard, Xubuntu, Lubuntu etc). Le 64-bit
  (AMD64)  n'est actuellement pas supporté. L'installateur est disponible au
  téléchargement ici: http://releases.ubuntu.com/precise/

* Faire un `sudo apt-get update` suivi d'un `sudo apt-get dist-upgrade` pour
  mettre la machine à jour avec les derniers paquets de Ubuntu Precise.

* Ajouter la clé de signature des archives LinuxCNC dans le apt keyring en
  faisant: `sudo apt-key adv --keyserver hkp://keys.gnupg.net --recv-key
  8f374fef`

* Ajouter la nouvelle source apt avec: `deb http://linuxcnc.org/precise base
  2.7-rtai`

* Lancer `sudo apt-get update` encore une fois pour rafraîchir la liste
  depuis linuxcnc.org.

* Installer le kernel RTAI et ses modules avec un: `sudo apt-get install
  linux-image-3.4-9-rtai-686-pae rtai-modules-3.4-9-rtai-686-pae`

* Pour compiler LinuxCNC à partir de ses sources, en utilisant le dépôt git,
  lancer `sudo apt-get install linux-headers-3.4-9-rtai-686-pae`

* Redémarrer puis s'assurer que le kernel est bien le kernel rtai. Au login,
  vérifier que `uname -r` donne bien 3.4-9-rtai-686-pae.

* Lancer `sudo apt-get install linuxcnc`.

* La machine est prête!
