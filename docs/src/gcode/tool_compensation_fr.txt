:lang: fr

= Les compensations d'outil

[[cha:compensation-outil]] (((Compensation d'outil)))

== Compensation de longueur d'outil

=== Toucher(((Toucher)))

Dans la boîte de dialogue du bouton 'Toucher' de l'interface AXIS, il est
possible de mettre à jour automatiquement la table d'outils.

Séquence typique pour mise à jour de la table d'outils:

* Après la prise d'origine, charger un outil 'Tn M6' dans lequel 'n' est le
  numéro de l'outil.
* Déplacer l'outil pour établir le zéro pièce, en utilisant une cale
   d'épaisseur ou en faisant une petite passe puis une mesure.
* Cliquer sur le bouton 'Toucher' de l'onglet 'Contrôle manuel' (ou presser la
   touche 'Fin' du clavier).
* Sélectionner 'Table d'outils' dans la liste déroulante des systèmes de
coordonnées.
* Entrer l'épaisseur de la cale ou la cote mesurée puis presser OK.

La table d'outil sera alors modifiée avec la longueur correcte en Z de
l'outil. La visu affichera la position en Z correcte et une commande G43
sera passée pour que la nouvelle longueur Z de l'outil soit effective. Le
choix 'Table d'outils' n'apparaîtra dans la liste déroulante du 'Toucher',
que si l'outil à été chargé avec 'Tn M6'.

.Toucher et table d'outils[[cap:Touch-Off-Tool]]

image::images/ToolTable-TouchOff_fr.png[align="left"]

=== Utilisation de G10 L1/L10/L11

Les commandes G10 L1/L10/L11 peuvent être utilisées pour ajuster les
compensations dans la table d'outils:
  (Ce sera juste une brève présentation, se reporter au guide de références du
G-code pour des explications plus détaillées)

* 'G10 L1  Pn' - (n est le N° d'outil) Fixe les offsets de l'outil. La position courante n'est pas significative. 
<<sec:G10-L1, Tous les détails ici>>.

* 'G10 L10 Pn'  - (n est le N° d'outil) Fixe l'offset à la position courante, met les valeurs
dans un système de 1 à 8. <<sec:G10-L10, Tous les détails ici>>.

* 'G10 L11 Pn'  - (n est le N° d'outil) Fixe l'offset à la position courante, met les valeurs
dans le système 9. <<sec:G10-L11, Tous les détails ici>>.

== Table d'outils[[sec:Table-Outils]]

// carried over from machining_center.txt for salvage -mah

// === Mill Format Tool Files

// The “mill format” of a tool file is shown in Table
// <<cap:Sample-Tool-File>>.

// .Sample Tool File (mill format)[[cap:Sample-Tool-File]]

// [width="90%", options="header"]
// |========================================
// |Pocket | FMS | TLO | Diameter | Comment
// | |  |  |  |
// |1 | 1 | 2.0 | 1.0 |
// |2 | 2 | 1.0 | 0.2 |
// |5 | 5 | 1.5 | 0.25 | endmill
// |10 | 10 | 2.4 | -0.3 | for testing
// |========================================

// Each line has five entries. The first four entries are required. The
// last entry (a comment) is optional. It makes reading easier if the
// entries are arranged in columns, as shown in the table, but the only
// format requirement is that there be at least one space or tab after
// each of the first three entries on a line and a space, tab, or newline
// at the end of the fourth entry. The meanings of the columns and the
// type of data to be put in each are as follows.

// The “Pocket” column contains the number (unsigned integer) which
// represents the pocket number (slot number) of the tool carousel slot in
// which the tool is placed. The entries in this column must all be
// different.

// The “FMS” column contains the number (unsigned integer) which
// represents a code number for the tool. The user may use any code for
// any tool, as long as the codes are unsigned integers. This is typically
// the same as the pocket number.

// The “TLO” column contains a real number which represents the tool
// length offset. This number will be used if tool length offsets are
// being used and this pocket is selected. This is normally a positive
// real number, but it may be zero or any other number if it is never to
// be used.

// The “Diameter” column contains a real number. This number is used only
// if tool radius compensation is turned on using this pocket. If the
// programmed path during compensation is the edge of the material being
// cut, this should be a positive real number representing the measured
// diameter of the tool. If the programmed path during compensation is the
// path of a tool whose diameter is nominal, this should be a small number
// (positive, negative, or zero) representing the difference between the
// measured diameter of the tool and the nominal diameter. If cutter
// radius compensation is not used with a tool, it does not matter what
// number is in this column.

// The “Comment” column may optionally be used to describe the tool. Any
// type of description is OK. This column is for the benefit of human
// readers only.

La 'table d'outils' est un fichier texte qui contient les informations de
chaque outil. Ce fichier est placé dans le même répertoire que le fichier
ini de configuration. Il est nommé 'tool.tbl'. Les outils peuvent être dans
un changeur d'outils ou changés manuellement. Ce fichier peut être édité
avec un éditeur de texte ou être mis à jour avec la commande G10 L1. Voir la
section: <<sec:lathe-tool-table,spécifique au tour>> pour ce qui concerne
les outils de tour, avec un exemple de table. Le nombre d'outils est limité
à 56 dans une table d'outils même si la numérotation des outils et des
poches peut aller jusqu'à 99999.

L'éditeur d'outils peut également être utilisé pour mettre la table d'outils
à jour. Après mise à jour, ne pas oublier de recharger la table dans la GUI,
pour que les modifications soient effectives.

=== Format de la table d'outils[[sec:Tool-Table-Format]]

.Format de la table d'outils

[width="100%", options="header"]
|========================================
|T#    |P#  |X  |Y  |Z  |A  |B  |C  |U  |V  |W  |Dia |FA |BA |Ori |Rem
|; 15+^|(aucune donnée après le point-virgule)
|T1    |P17 |X0 |Y0 |Z0 |A0 |B0 |C0 |U0 |V0 |W0 |D0  |I0 |J0 |Q0  |;rem
|T2    |P5  |X0 |Y0 |Z0 |A0 |B0 |C0 |U0 |V0 |W0 |D0  |I0 |J0 |Q0  |;rem
|T3    |P12 |X0 |Y0 |Z0 |A0 |B0 |C0 |U0 |V0 |W0 |D0  |I0 |J0 |Q0  |;rem
|========================================

En général, le format d'une ligne de table d'outils est le suivant:

 - ; Un point-virgule comme premier caractère, aucune donnée
 - T Numéro d'outil, 0-99999 (chaque numéro d'outil doit être unique)
 - P Numéro de poche, 1-99999 (chaque numéro de poche doit être unique)
 - X..W  Offset d'outil sur les axes spécifiés - nombre à virgule flottante
 - D diamètre d'outil - nombre à virgule flottante, valeur absolue
 - I angle frontal (tour seulement) - nombre à virgule flottante
 - J angle de dos (tour seulement) - nombre à virgule flottante
 - Q orientation de l'outil (tour seulement) - entier de 0 à 9
 - ; début de commentaire ou remarque - texte

Le fichier commence par un point-virgule en première ligne, suivi par les
caractéristiques de 56 outils au maximum. footnote:[Bien que les numéros
d'outils puissent aller jusqu'à 99999, le nombre d'outils dans la table, en
ce moment, est limité à un maximum de 56 outils pour des raisons
techniques. Les développeurs de LinuxCNC envisagent la possibilité de faire
sauter cette limitation. Si vous avez un très gros changeur d'outils, merci
d'être patient.]

Les versions antérieures de LinuxCNC avaient deux différents formats de
table d'outils un pour les fraiseuses et un pour les tours, mais depuis la
version 2.4.x, un format unique est utilisé pour toutes les machines. Il
suffit d'ignorer les parties de la table d'outils qui ne se rapportent pas
la machine actuelle, ou que vous n'avez pas besoin d'utiliser.

Chaque ligne du fichier de la table d'outils après le point-virgule ouvrant,
contient les données pour un seul outil. Une ligne peut contenir jusqu'à 16
entrées, mais peut aussi en contenir beaucoup moins.

Les unités utilisées pour les longueurs, diamètres, etc. sont en unités
machine.

Vous voudrez probablement maintenir les entrées d'outils dans l'ordre
croissant, surtout si vous utilisez un changeur d'outils aléatoire. Bien que
la table d'outils permettent des numéros d'outils dans n'importe quel ordre.

Chaque ligne peut avoir jusqu'à 16 valeurs. Les deux premières valeurs sont
requises. La dernière valeur (un point-virgule suivi d'un commentaire) est
optionnelle. La lecture sera rendue plus facile si les valeurs sont
disposées en colonnes, comme indiqué dans le tableau, mais la seule exigence
sur le format est qu'il y ait au moins un espace ou une tabulation après
chacune des valeurs sur une ligne et un saut de ligne à la fin de chaque
ligne.

La signification des valeurs et le type de données qu'elles contiennent sont
les suivantes:

.Numéro d'outil (requis)
La colonne 'T' contient un nombre entier non signé, qui représente le code
de l'outil. L'opérateur peut utiliser n'importe quel code pour n'importe
quel outil, tant que les codes sont des entiers non signés.

.Numéro de poche (requis)
La colonne 'P' contient un nombre entier non signé, qui représente le numéro
de poche (numéro de slot) du changeur d'outils, poche dans laquelle l'outil
se trouve. Les entrées de cette colonne doivent être toutes différentes.

Le numéro de poche commence typiquement à 1 et va au maximum de poches
disponibles sur le changeur d'outils. Mais tous les changeurs d'outils ne
suivent pas ce modèle. Votre numéro de poche sera déterminé, par le numéro
que votre changeur d'outil utilisera pour se référer à ses poches. Tout cela
pour dire que les numéros de poche que vous utiliserez seront déterminés par
le schéma de numérotation de votre changeur d'outil. Les numéros de poche
doivent suivre la même logique que la machine.

.Données d'offset des outils (optionnelles)
Les colonnes de données d'offset (XYZABCUVW) contiennent des nombres réels
qui représentent les offsets d'outil pour chacun des axes. Ce nombre sera
utilisé si, en usinage, les offsets de longueur d'outil sont utilisés et que
l'outil concerné est sélectionné. Ces nombres peuvent être positif, égaux à
zéro ou négatif, ils sont en fait, complètement optionnels. Bien qu'il
vaudrait mieux qu'il y ait au moins une valeur ici, sinon il n'y aurait
aucun intérêt à se servir d'une entrée complètement vide dans la table
d'outils.

Sur une fraiseuse classique, on trouvera probablement une entrée en Z
(offset de longueur d'outil). Sur un tour classique, on trouvera
certainement un entrée en X (offset d'outil en X) et une en Z (offset
d'outil en Z). Sur une fraiseuse classique utilisant la compensation de
rayon d'outil, on trouvera une valeur en D pour l'offset de diamètre. Sur un
tour classique utilisant la compensation de diamètre de bec d'outil, une
valeur sera entrée en D (diamètre de bec).

Un tour demande encore d'autres informations pour décrire la forme et
l'orientation de l'outil. Ainsi, on trouvera une valeur en I (angle avant)
et en J (angle de dos) ainsi qu'une valeur en Q (orientation).

Une description complète des outils de tour <<cha:Tour-Specifiques,ce trouve
ici>>.

La colonne 'Diamètre' contient un nombre réel. Ce nombre est utilisé
seulement si la compensation est activée lors de l'usage de cet outil. Si la
trajectoire programmée avec la compensation active, est un des bords de la
matière à usiner, cette valeur doit être un nombre réel positif,
représentant le diamètre mesuré de l'outil. Si la trajectoire programmée,
toujours avec la compensation active, est prévue pour un diamètre nominal
d'outil, ce nombre doit être très petit (négatif ou positif, mais proche de
zéro), il représente seulement la différence entre le diamètre nominal et le
diamètre mesuré de l'outil. Si la compensation n'est pas utilisée avec un
outil, cette valeur est sans importance.

La colonne des commentaires peut optionnellement être utilisée pour décrire
l'outil. Elle commence par un point-virgule, elle peut contenir n'importe
quel texte pour le seul bénéfice de l'opérateur.  

=== Changeur d'outil[[sec:Tool-Changers]]

LinuxCNC supporte trois types de changeur d'outil: 'manuel', 'à emplacements
aléatoires' et 'à emplacements fixes'. Une information complète à ce propos
se trouve dans le manuel de configuration de LinuxCNC.

.Changement d'outil manuel

Le changeur d'outil manuel (l'opérateur change les outils à la main) est
traité comme un changeur d'outil à emplacement fixe, le nombre P est
ignoré. L'utilisation d'un changeur d'outil manuel n'a de sens que si des
porte-outils conservant les outils montés, sont utilisés. (Cat, NMTB, Kwik
Switch etc.) Quand ils sont changés, les cotes de l'outil par rapport à la
broche, sont préservées. Les machines avec cône R-8 ou avec maintien de
l'outil de type collet, ne préservent pas les cotes des outils et le
changeur d'outils manuel ne doit pas être utilisé.

.Changeur d'outil à emplacements fixes

Le changeur d'outil à emplacements fixes, range toujours l'outil dans le
même emplacement du rack d'outils. Ceci inclut également les designs comme
les tourelles d'outils de tour. Quand LinuxCNC est configuré pour ce type de
changeur d'outil, le nombre 'P' est ignoré (mais lu, préservé et réécrit)
par LinuxCNC, ainsi P peut être utilisé pour toutes sortes de compatibilité.

.Changeur d'outil à emplacements aléatoires

Le changeur d'outil à emplacements aléatoires permute l'outil dans la broche
avec celui de la poche du changeur. Avec ce type de changeur d'outil,
l'outil est toujours placé dans une poche différente après le
changement. Quand un outil est changé, LinuxCNC réécrit le numéro de poche
pour garder la trace de la poche dans laquelle l'outil se trouve. T peut
être n'importe quel numéro mais P doit être un numéro sensé selon la
machine.


== Compensation d'outil[[sec:Compensation-rayon-d-outil]]

La compensation de rayon d'outil permet de suivre un parcours sans se
préoccuper du diamètre de l'outil. La seule restriction, c'est que les
'mouvements d'entrée' doivent être au moins aussi long que le rayon de
l'outil utilisé.

Il y a deux parcours que l'outil peut prendre pour usiner un profil quand la
compensation de rayon est activée, un parcours à gauche du profil et un à
droite du profil. Pour les visualiser, il faut s'imaginer être debout sur la
pièce, marchant en suivant l'outil pendant que celui-ci progresse dans la
matière. G41 fait passer l'outil à gauche du profil et G42 le fait passer à
droite du profil.

Le point final de chaque mouvement, dépends du mouvement suivant. Si le
mouvement suivant crée un angle extérieur, le mouvement se terminera à
l'extrémité de la ligne de coupe compensée. Si le mouvement suivant crée un
angle intérieur, l'outil s'arrêtera avant d'interférer avec la matière de la
pièce. La figure suivante montre comment le mouvement se termine à
différents endroits, dépendants du mouvement suivant.

.Point final de la compensation[[cap:Compensation-End-Point]]

image::images/comp-path_fr.png[]

=== Vue générale

.Table d'outils

La compensation de rayon d'outil utilise les données de la table d'outils
pour déterminer le décalage nécessaire. Les données peuvent être introduites
à la volée, avec G10 L1.

.Programmation des mouvements d'entrée

Tout mouvement suffisamment long pour arriver en position compensée, sera un
mouvement d'entrée valide. La longueur minimale équivaut au rayon de
l'outil. Ça peut être un mouvement en vitesse rapide au dessus de la
pièce. Si plusieurs mouvements en vitesse rapide sont prévus après un
G41/G42, seul le dernier placera l'outil en position compensée.

Dans la figure suivante, on voit que le mouvement d'entrée est compensé à
droite du profil. Ce qui aura pour effet, lors du mouvement d'entrée, de
déplacer le centre de l'outil, d'un rayon d'outil à droite de X0. Dans ce
cas, le mouvement d'entrée laissera un petit plot de matière en raison du
décalage de compensation et de l'arrondi de l'outil.

.Mouvement d'entrée[[cap:Entry-Move]]

image::images/comp02.png[]

.Mouvement en Z

Un mouvement en Z est possible pendant que le contour est suivi dans le plan
XY. Des portions du contour peuvent être sautées en rétractant l'axe Z au
dessus du bloc et en amenant Z au dessus du prochain point de départ.

.Mouvements en vitesse rapide

Des mouvements en vitesse rapide peuvent être programmés avec les
compensations d'outil activées.

.Bonne pratique

 - Débuter tout programme avec un G40 pour être sûr que la compensation est
   désactivée.

=== Exemples de profils

.Profil extérieur

.Profil extérieur[[cap:Outside-Profile]]

image::images/outside-comp_fr.png[]

.Profil intérieur

.Profil intérieur[[cap:Inside-Profile]]

image::images/inside-comp_fr.png[]

