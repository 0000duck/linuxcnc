#
# Makefile for linking the assorted parts in to one lib.
#
# make rules.
include ../../Makefile.inc

# Include definitions of LIB_OBJS
include linklist/Makefile.lib
include inifile/Makefile.lib

LIBS = $(LIB_DIR)/libnmld.a $(LIB_DIR)/libnml.a

all: $(LIBS)

$(LIB_DIR)/libnml.a: $(LIB_DIR)/libnmld.a
	rm -f $@
	cp $(LIB_DIR)/libnmld.a $(LIB_DIR)/libnml.a
	strip --strip-debug $@
	$(AR) -ts $@
	chmod 664 $@

$(LIB_DIR)/libnmld.a: $(LIB_OBJS:%=$(TMP_DIR)/%)
	rm -f $@
	$(AR) $(ARFLAGS) $@ $(LIB_OBJS:%=$(TMP_DIR)/%)
	$(RANLIB) $@
	chmod 664 $@

clean:
	- (rm -f $(LIBS))


.PHONY: all clean depend headers indent install
