#!/bin/bash
MAX_WAIT=${2-20}

N=0
while [ -z "$(halcmd -qs show pin $1)" ]; do
    sleep .1
    if [ $N -gt $MAX_WAIT ]; then
        exit 1
    fi
    N=$(($N+1))
    echo -n "." 1>&2
done
if [ $N -gt 0 ]; then echo 1>&2; fi
